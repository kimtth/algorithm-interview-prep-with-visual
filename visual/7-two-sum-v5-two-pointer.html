<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two Sum - Two Pointer | Algorithm Visualization</title>
    <link rel="stylesheet" href="visual.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
</head>
<body>
    <div class="container">
        <h1>üìä Q7. Two Sum</h1>
        <p class="subtitle">Solution 5: Two Pointer (Requires Sorted Array)</p>

        <div class="problem-info">
            <h3>üìã Problem Description</h3>
            <p><strong>Given:</strong> A <strong>sorted</strong> array of integers and a target</p>
            <p><strong>Approach:</strong> Use two pointers from both ends. If sum is too small, move left pointer right. If sum is too big, move right pointer left.</p>
            <div class="warning">
                ‚ö†Ô∏è <strong>Note:</strong> This approach only works on sorted arrays. For the original Two Sum problem returning indices, we'd need to track original indices before sorting.
            </div>
            <p class="mt-10">
                <span class="tag">Two Pointer</span>
                <span class="tag">Sorted Array</span>
                <a href="https://leetcode.com/problems/two-sum-ii-input-array-is-sorted/" target="_blank" class="ml-10">Similar: LeetCode #167 ‚Üí</a>
            </p>
        </div>

        <div class="controls">
            <label>Example (sorted):</label>
            <select id="exampleSelect">
                <option value="2,7,11,15|9">nums=[2,7,11,15], target=9</option>
                <option value="1,2,3,4,6|6">nums=[1,2,3,4,6], target=6</option>
                <option value="1,3,5,7,9,11|12">nums=[1,3,5,7,9,11], target=12</option>
                <option value="2,3,5,8,11,15|13">nums=[2,3,5,8,11,15], target=13</option>
            </select>
            <button class="btn-primary" id="startBtn">‚ñ∂ Start</button>
            <button class="btn-success" id="stepBtn" disabled>Step ‚Üí</button>
            <button class="btn-warning" id="autoBtn" disabled>‚è© Auto Run</button>
            <button class="btn-danger" id="resetBtn">‚Ü∫ Reset</button>
        </div>

        <div class="visualization">
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color legend-circle bg-cyan"></div>
                    <span>Left pointer</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-circle bg-red-soft"></div>
                    <span>Right pointer</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-circle bg-lime"></div>
                    <span>Found pair</span>
                </div>
            </div>
            <svg id="svg" width="100%" height="320"></svg>
        </div>

        <div class="status-box" id="statusBox">
            <h4 id="statusTitle">Ready to Start</h4>
            <p id="statusDesc">Two pointers converge from both ends of the sorted array.</p>
        </div>

        <div class="code-section">
            <h3>üìÑ Python Solution (7-5.py)</h3>
            <pre><span class="keyword">from</span> typing <span class="keyword">import</span> List


<span class="keyword">class</span> Solution:
    <span class="keyword">def</span> <span class="function">twoSum</span>(<span class="keyword">self</span>, nums: List[int], target: int) -&gt; List[int]:
        left, right = <span class="number">0</span>, <span class="function">len</span>(nums) - <span class="number">1</span>
        <span class="keyword">while</span> <span class="keyword">not</span> left == right:
            <span class="comment"># Ìï©Ïù¥ ÌÉÄÍ≤üÎ≥¥Îã§ ÌÅ¨Î©¥ Ïò§Î•∏Ï™Ω Ìè¨Ïù∏ÌÑ∞Î•º ÏôºÏ™ΩÏúºÎ°ú</span>
            <span class="keyword">if</span> nums[left] + nums[right] &lt; target:
                left += <span class="number">1</span>
            <span class="comment"># Ìï©Ïù¥ ÌÉÄÍ≤üÎ≥¥Îã§ ÏûëÏúºÎ©¥ ÏôºÏ™Ω Ìè¨Ïù∏ÌÑ∞Î•º Ïò§Î•∏Ï™ΩÏúºÎ°ú</span>
            <span class="keyword">elif</span> nums[left] + nums[right] &gt; target:
                right -= <span class="number">1</span>
            <span class="keyword">else</span>:
                <span class="keyword">return</span> [left, right]</pre>
        </div>

    </div>

    <script>
        const width = 1100;
        const height = 320;
        
        let nums = [];
        let target = 0;
        let left = 0, right = 0;
        let found = false;
        let animating = false;
        let autoRunning = false;

        const svg = d3.select("#svg").attr("viewBox", `0 0 ${width} ${height}`);

        function parseInput() {
            const val = document.getElementById('exampleSelect').value;
            const [arrStr, tgtStr] = val.split('|');
            nums = arrStr.split(',').map(n => parseInt(n.trim()));
            target = parseInt(tgtStr);
        }

        function draw() {
            svg.selectAll("*").remove();
            
            const boxWidth = Math.min(80, (width - 100) / nums.length);
            const startX = (width - nums.length * boxWidth) / 2;
            const arrayY = 80;

            // Title
            svg.append("text")
                .attr("x", width / 2)
                .attr("y", 30)
                .attr("text-anchor", "middle")
                .attr("font-size", "18px")
                .attr("font-weight", "bold")
                .attr("fill", "#2c3e50")
                .text(`Target: ${target} | Sorted Array`);

            // Array
            nums.forEach((num, idx) => {
                const x = startX + idx * boxWidth;
                
                let fillColor = "#fff";
                let strokeColor = "#bdc3c7";

                if (found && (idx === left || idx === right)) {
                    fillColor = "#27ae60";
                    strokeColor = "#27ae60";
                } else if (idx === left) {
                    fillColor = "#3498db";
                    strokeColor = "#3498db";
                } else if (idx === right) {
                    fillColor = "#e74c3c";
                    strokeColor = "#e74c3c";
                }

                svg.append("rect")
                    .attr("x", x + 2)
                    .attr("y", arrayY)
                    .attr("width", boxWidth - 4)
                    .attr("height", 50)
                    .attr("rx", 8)
                    .attr("fill", fillColor)
                    .attr("stroke", strokeColor)
                    .attr("stroke-width", 2);

                svg.append("text")
                    .attr("x", x + boxWidth / 2)
                    .attr("y", arrayY + 32)
                    .attr("text-anchor", "middle")
                    .attr("font-size", "18px")
                    .attr("font-weight", "bold")
                    .attr("fill", (idx === left || idx === right || found) && (idx === left || idx === right) ? "#fff" : "#2c3e50")
                    .text(num);

                svg.append("text")
                    .attr("x", x + boxWidth / 2)
                    .attr("y", arrayY + 70)
                    .attr("text-anchor", "middle")
                    .attr("font-size", "12px")
                    .attr("fill", "#7f8c8d")
                    .text(`[${idx}]`);
            });

            // Pointers
            if (animating || found) {
                const leftX = startX + left * boxWidth + boxWidth / 2;
                const rightX = startX + right * boxWidth + boxWidth / 2;

                svg.append("text")
                    .attr("x", leftX)
                    .attr("y", arrayY - 15)
                    .attr("text-anchor", "middle")
                    .attr("font-size", "14px")
                    .attr("font-weight", "bold")
                    .attr("fill", "#3498db")
                    .text("L");

                svg.append("text")
                    .attr("x", rightX)
                    .attr("y", arrayY - 15)
                    .attr("text-anchor", "middle")
                    .attr("font-size", "14px")
                    .attr("font-weight", "bold")
                    .attr("fill", "#e74c3c")
                    .text("R");
            }

            // Current calculation
            if (animating && !found) {
                const sum = nums[left] + nums[right];
                const calcY = 200;

                svg.append("text")
                    .attr("x", width / 2)
                    .attr("y", calcY)
                    .attr("text-anchor", "middle")
                    .attr("font-size", "16px")
                    .attr("fill", "#2c3e50")
                    .text(`nums[${left}] + nums[${right}] = ${nums[left]} + ${nums[right]} = ${sum}`);

                let action = "";
                let actionColor = "#2c3e50";
                
                if (sum < target) {
                    action = `${sum} < ${target} ‚Üí Move left pointer right`;
                    actionColor = "#3498db";
                } else if (sum > target) {
                    action = `${sum} > ${target} ‚Üí Move right pointer left`;
                    actionColor = "#e74c3c";
                } else {
                    action = `${sum} = ${target} ‚Üí Found!`;
                    actionColor = "#27ae60";
                }

                svg.append("text")
                    .attr("x", width / 2)
                    .attr("y", calcY + 35)
                    .attr("text-anchor", "middle")
                    .attr("font-size", "15px")
                    .attr("font-weight", "bold")
                    .attr("fill", actionColor)
                    .text(action);

                // Visual representation
                const barY = 270;
                const barWidth = 300;
                const barStartX = (width - barWidth) / 2;

                svg.append("rect")
                    .attr("x", barStartX)
                    .attr("y", barY)
                    .attr("width", barWidth)
                    .attr("height", 20)
                    .attr("rx", 10)
                    .attr("fill", "#ecf0f1");

                const targetPos = barStartX + (target / (nums[nums.length-1] * 2)) * barWidth;
                const sumPos = barStartX + (sum / (nums[nums.length-1] * 2)) * barWidth;

                svg.append("circle")
                    .attr("cx", Math.min(targetPos, barStartX + barWidth))
                    .attr("cy", barY + 10)
                    .attr("r", 6)
                    .attr("fill", "#2c3e50");

                svg.append("circle")
                    .attr("cx", Math.min(sumPos, barStartX + barWidth))
                    .attr("cy", barY + 10)
                    .attr("r", 6)
                    .attr("fill", sum === target ? "#27ae60" : (sum < target ? "#3498db" : "#e74c3c"));
            }
        }

        function doStep() {
            if (found || left >= right) return;

            const sum = nums[left] + nums[right];

            if (sum === target) {
                found = true;
                updateStatus("üéâ Solution Found!", 
                    `nums[${left}] + nums[${right}] = ${nums[left]} + ${nums[right]} = ${target}\nReturn: [${left}, ${right}]`, "success");
                document.getElementById('stepBtn').disabled = true;
                document.getElementById('autoBtn').disabled = true;
                autoRunning = false;
                document.getElementById('autoBtn').textContent = "‚è© Auto Run";
            } else if (sum < target) {
                left++;
                updateStatus("Sum too small", `Moving left pointer right to increase sum`, "info");
            } else {
                right--;
                updateStatus("Sum too big", `Moving right pointer left to decrease sum`, "info");
            }

            draw();
        }

        function updateStatus(title, desc, type) {
            const box = document.getElementById('statusBox');
            box.className = 'status-box ' + type;
            document.getElementById('statusTitle').textContent = title;
            document.getElementById('statusDesc').innerHTML = desc.replace(/\n/g, '<br>');
        }

        function reset() {
            parseInput();
            left = 0;
            right = nums.length - 1;
            found = false;
            animating = false;
            autoRunning = false;

            document.getElementById('startBtn').disabled = false;
            document.getElementById('stepBtn').disabled = true;
            document.getElementById('autoBtn').disabled = true;
            document.getElementById('autoBtn').textContent = "‚è© Auto Run";

            updateStatus("Ready to Start", "Two pointers converge from both ends of the sorted array.", "");
            draw();
        }

        function start() {
            reset();
            animating = true;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stepBtn').disabled = false;
            document.getElementById('autoBtn').disabled = false;
            updateStatus("Started", "Click Step or Auto Run to watch the algorithm.", "info");
            draw();
        }

        function autoRun() {
            if (autoRunning) {
                autoRunning = false;
                document.getElementById('autoBtn').textContent = "‚è© Auto Run";
                return;
            }
            autoRunning = true;
            document.getElementById('autoBtn').textContent = "‚è∏ Pause";

            function runStep() {
                if (!autoRunning || found || left >= right) {
                    autoRunning = false;
                    document.getElementById('autoBtn').textContent = "‚è© Auto Run";
                    return;
                }
                doStep();
                setTimeout(runStep, 800);
            }
            runStep();
        }

        document.getElementById('startBtn').addEventListener('click', start);
        document.getElementById('stepBtn').addEventListener('click', doStep);
        document.getElementById('autoBtn').addEventListener('click', autoRun);
        document.getElementById('resetBtn').addEventListener('click', reset);
        document.getElementById('exampleSelect').addEventListener('change', reset);

        reset();
    </script>
</body>
</html>
