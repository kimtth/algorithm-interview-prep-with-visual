<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q49: Minimum Height Trees</title>
    <link rel="stylesheet" href="visual.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
</head>
<body>
    <div class="container">
        <div class="problem-info">
            <h1>Q49: Minimum Height Trees</h1>
            <p>Find roots that minimize tree height by repeatedly removing leaf nodes until 1-2 nodes remain.</p>
            <div class="problem-meta">
                <span class="meta-tag">ğŸ“ Graph</span>
                <span class="meta-tag">â±ï¸ O(n)</span>
                <span class="meta-tag">ğŸ’¡ Leaf Trimming</span>
            </div>
        </div>
        
        
        
        <div class="visualization-section">
            <h3>ğŸ¬ Visualization</h3>
            
            <div class="controls">
                <button class="btn btn-primary" id="stepBtn" onclick="step()">Step</button>
                <button class="btn btn-success" id="autoBtn" onclick="toggleAuto()">Auto Run</button>
                <button class="btn btn-warning" onclick="reset()">Reset</button>
            </div>
            
            <div class="legend">
                <div class="legend-item"><div class="legend-circle bg-cyan"></div> Active</div>
                <div class="legend-item"><div class="legend-circle legend-color bg-orange"></div> Current Leaf</div>
                <div class="legend-item"><div class="legend-circle legend-color bg-gray-light"></div> Removed</div>
                <div class="legend-item"><div class="legend-circle legend-color bg-green"></div> Center (Answer)</div>
            </div>
            
            <div class="status-message" id="statusMessage">
                n=6, edges=[[0,3],[1,3],[2,3],[4,3],[5,4]]. Find MHT roots.
            </div>
            
            <div class="info-section">
                <div class="info-box">
                    <div class="info-label">Remaining Nodes</div>
                    <div class="info-value" id="remainingCount">6</div>
                </div>
            </div>
            
            <div class="graph-container">
                <svg id="graph" width="500" height="300"></svg>
            </div>
            
            <div class="leaves-section">
                <div class="leaves-title">ğŸƒ Current Leaves</div>
                <div class="leaves-items" id="leavesDisplay"><span class="text-gray">Empty</span></div>
            </div>
        </div>
    </div>
        
        <div class="code-section">
            <h3>ğŸ“„ Python Solution (49-1.py)</h3>
            <pre><span class="keyword">import</span> collections
<span class="keyword">from</span> typing <span class="keyword">import</span> List


<span class="comment"># Definition for a binary tree node.</span>
<span class="keyword">class</span> TreeNode:
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="keyword">self</span>, x):
        <span class="keyword">self</span>.val = x
        <span class="keyword">self</span>.left = <span class="keyword">None</span>
        <span class="keyword">self</span>.right = <span class="keyword">None</span>


<span class="keyword">class</span> Solution:
    <span class="keyword">def</span> <span class="function">findMinHeightTrees</span>(<span class="keyword">self</span>, n: int, edges: List[List[int]]) -&gt; List[int]:
        <span class="keyword">if</span> n &lt;= <span class="number">1</span>:
            <span class="keyword">return</span> [<span class="number">0</span>]

        <span class="comment"># ì–‘ë°©í–¥ ê·¸ë˜í”„ êµ¬ì„±</span>
        graph = collections.<span class="function">defaultdict</span>(list)
        <span class="keyword">for</span> i, j <span class="keyword">in</span> edges:
            graph[i].<span class="function">append</span>(j)
            graph[j].<span class="function">append</span>(i)

        <span class="comment"># ì²« ë²ˆì§¸ ë¦¬í”„ ë…¸ë“œ ì¶”ê°€</span>
        leaves = []
        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(n + <span class="number">1</span>):
            <span class="keyword">if</span> <span class="function">len</span>(graph[i]) == <span class="number">1</span>:
                leaves.<span class="function">append</span>(i)

        <span class="comment"># ë£¨íŠ¸ ë…¸ë“œë§Œ ë‚¨ì„ ë•Œê¹Œì§€ ë°˜ë³µ ì œê±°</span>
        <span class="keyword">while</span> n &gt; <span class="number">2</span>:
            n -= <span class="function">len</span>(leaves)
            new_leaves = []
            <span class="keyword">for</span> leaf <span class="keyword">in</span> leaves:
                neighbor = graph[leaf].<span class="function">pop</span>()
                graph[neighbor].<span class="function">remove</span>(leaf)

                <span class="keyword">if</span> <span class="function">len</span>(graph[neighbor]) == <span class="number">1</span>:
                    new_leaves.<span class="function">append</span>(neighbor)

            leaves = new_leaves

        <span class="keyword">return</span> leaves</pre>
        </div>

    </div>

    <script>
        // Graph: 0-3, 1-3, 2-3, 3-4, 4-5
        //   0   1   2
        //    \  |  /
        //      3
        //      |
        //      4
        //      |
        //      5
        const n = 6;
        const edges = [[0,3],[1,3],[2,3],[4,3],[5,4]];
        const positions = {
            0: {x: 100, y: 50},
            1: {x: 250, y: 50},
            2: {x: 400, y: 50},
            3: {x: 250, y: 130},
            4: {x: 250, y: 210},
            5: {x: 250, y: 270}
        };
        
        let graph = {};
        let leaves = [];
        let removed = new Set();
        let remaining = n;
        let done = false;
        let autoInterval = null;
        
        function init() {
            graph = {};
            for (let i = 0; i < n; i++) graph[i] = [];
            edges.forEach(([a, b]) => {
                graph[a].push(b);
                graph[b].push(a);
            });
            
            leaves = [];
            for (let i = 0; i < n; i++) {
                if (graph[i].length === 1) leaves.push(i);
            }
            
            removed = new Set();
            remaining = n;
            done = false;
            
            renderGraph();
            renderLeaves();
            document.getElementById('remainingCount').textContent = remaining;
        }
        
        function renderGraph() {
            const svg = d3.select("#graph");
            svg.selectAll("*").remove();
            
            // Draw edges
            edges.forEach(([a, b]) => {
                if (removed.has(a) || removed.has(b)) return;
                const pa = positions[a];
                const pb = positions[b];
                svg.append("line")
                    .attr("x1", pa.x).attr("y1", pa.y)
                    .attr("x2", pb.x).attr("y2", pb.y)
                    .attr("stroke", "#999")
                    .attr("stroke-width", 2);
            });
            
            // Draw nodes
            for (let i = 0; i < n; i++) {
                const pos = positions[i];
                let fill = "#3498db";
                if (removed.has(i)) fill = "#bdbdbd";
                else if (done && leaves.includes(i)) fill = "#4caf50";
                else if (leaves.includes(i)) fill = "#ff9800";
                
                svg.append("circle")
                    .attr("cx", pos.x)
                    .attr("cy", pos.y)
                    .attr("r", 24)
                    .attr("fill", fill)
                    .attr("stroke", "#333")
                    .attr("stroke-width", 2)
                    .attr("opacity", removed.has(i) ? 0.4 : 1);
                
                svg.append("text")
                    .attr("x", pos.x)
                    .attr("y", pos.y + 5)
                    .attr("text-anchor", "middle")
                    .attr("fill", "white")
                    .attr("font-weight", "bold")
                    .attr("opacity", removed.has(i) ? 0.4 : 1)
                    .text(i);
            }
        }
        
        function renderLeaves() {
            const container = document.getElementById('leavesDisplay');
            const activeLeaves = leaves.filter(l => !removed.has(l));
            if (activeLeaves.length === 0) {
                container.innerHTML = '<span class="text-gray">None</span>';
            } else {
                container.innerHTML = activeLeaves.map(l => 
                    `<div class="leaves-item">${l}</div>`
                ).join('');
            }
        }
        
        function step() {
            if (done || remaining <= 2) {
                done = true;
                document.getElementById('statusMessage').textContent = 
                    `âœ… MHT root(s): [${leaves.filter(l => !removed.has(l)).join(', ')}]`;
                document.getElementById('stepBtn').disabled = true;
                stopAuto();
                renderGraph();
                return;
            }
            
            remaining -= leaves.length;
            document.getElementById('remainingCount').textContent = remaining;
            
            const newLeaves = [];
            leaves.forEach(leaf => {
                removed.add(leaf);
                const neighbors = graph[leaf];
                neighbors.forEach(neighbor => {
                    graph[neighbor] = graph[neighbor].filter(n => n !== leaf);
                    if (graph[neighbor].length === 1 && !removed.has(neighbor)) {
                        newLeaves.push(neighbor);
                    }
                });
            });
            
            document.getElementById('statusMessage').textContent = 
                `Removed leaves [${leaves.join(', ')}]. New leaves: [${newLeaves.join(', ')}]`;
            
            leaves = newLeaves;
            
            renderGraph();
            renderLeaves();
            
            if (remaining <= 2) {
                done = true;
                document.getElementById('statusMessage').textContent = 
                    `âœ… MHT root(s): [${leaves.join(', ')}]`;
                document.getElementById('stepBtn').disabled = true;
                stopAuto();
                renderGraph();
            }
        }
        
        function toggleAuto() {
            if (autoInterval) { stopAuto(); }
            else {
                document.getElementById('autoBtn').textContent = 'Pause';
                autoInterval = setInterval(step, 800);
            }
        }
        
        function stopAuto() {
            if (autoInterval) { clearInterval(autoInterval); autoInterval = null; }
            document.getElementById('autoBtn').textContent = 'Auto Run';
        }
        
        function reset() {
            stopAuto();
            document.getElementById('stepBtn').disabled = false;
            document.getElementById('statusMessage').textContent = 
                'n=6, edges=[[0,3],[1,3],[2,3],[4,3],[5,4]]. Find MHT roots.';
            init();
        }
        
        init();
    </script>
</body>
</html>
