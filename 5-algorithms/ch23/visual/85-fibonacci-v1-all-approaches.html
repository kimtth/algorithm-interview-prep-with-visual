<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fibonacci - All Approaches</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 { text-align: center; color: white; margin-bottom: 10px; }
        .subtitle { text-align: center; color: rgba(255,255,255,0.9); margin-bottom: 20px; font-size: 14px; }
        .tabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab { background: rgba(255,255,255,0.2); color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .tab.active { background: white; color: #667eea; }
        .controls { display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; }
        button { background: white; color: #667eea; border: none; padding: 10px 25px; border-radius: 25px; cursor: pointer; font-weight: 600; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .panel { background: white; border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .panel-title { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 15px; border-bottom: 2px solid #667eea; padding-bottom: 10px; }
        .fib-display { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; padding: 20px; }
        .fib-item { width: 55px; height: 60px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 10px; font-weight: bold; transition: all 0.3s; }
        .fib-item .idx { font-size: 10px; color: #999; }
        .fib-item .val { font-size: 18px; }
        .default { background: #f5f7fa; border: 2px solid #ddd; }
        .computed { background: #4caf50; color: white; border: 2px solid #2e7d32; }
        .current { background: #2196f3; color: white; border: 2px solid #1976d2; }
        .memo-table { display: flex; justify-content: center; gap: 5px; flex-wrap: wrap; padding: 10px; background: #f5f7fa; border-radius: 10px; min-height: 50px; }
        .memo-item { padding: 8px 12px; background: #667eea; color: white; border-radius: 5px; font-family: monospace; }
        .result-box { text-align: center; padding: 20px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px; color: white; }
        .result-value { font-size: 48px; font-weight: bold; }
        .result-label { font-size: 14px; opacity: 0.9; }
        .status-box { background: #f5f7fa; border-radius: 10px; padding: 15px; font-family: monospace; }
        .complexity { text-align: center; padding: 10px; color: #667eea; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üêá Fibonacci Number</h1>
        <p class="subtitle">Compare: Recursive ‚Üí Memoization ‚Üí Tabulation ‚Üí Space Optimized</p>

        <div class="tabs">
            <button class="tab active" data-method="recursive">Recursive</button>
            <button class="tab" data-method="memo">Memoization</button>
            <button class="tab" data-method="tabulation">Tabulation</button>
            <button class="tab" data-method="optimized">Space Optimized</button>
        </div>

        <div class="controls">
            <button id="stepBtn">Step</button>
            <button id="autoBtn">Auto Run</button>
            <button id="resetBtn">Reset</button>
        </div>

        <div class="panel">
            <div class="panel-title">üìä Fibonacci Sequence (n = 7)</div>
            <div class="fib-display" id="fib"></div>
            <div class="complexity" id="complexity">Time: O(2‚Åø) | Space: O(n)</div>
        </div>

        <div class="panel" id="memo-panel" style="display:none;">
            <div class="panel-title">üíæ Memoization Cache</div>
            <div class="memo-table" id="memo"></div>
        </div>

        <div class="panel">
            <div class="panel-title">üéØ Result: F(7)</div>
            <div class="result-box">
                <div class="result-value" id="result">?</div>
                <div class="result-label" id="calls">Calls: 0</div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-title">üìã Status</div>
            <div class="status-box" id="status">Click Step to compute F(7)</div>
        </div>
    </div>

    <script>
        const N = 7;
        let method = 'recursive';
        let fibValues = new Array(N + 1).fill(null);
        let memo = {};
        let currentIdx = 0;
        let calls = 0;
        let done = false;
        let autoInterval = null;
        let prevTwo = [0, 1];

        const complexities = {
            recursive: 'Time: O(2‚Åø) | Space: O(n) call stack',
            memo: 'Time: O(n) | Space: O(n)',
            tabulation: 'Time: O(n) | Space: O(n)',
            optimized: 'Time: O(n) | Space: O(1)'
        };

        function render() {
            document.getElementById('fib').innerHTML = fibValues.map((v, i) => {
                let cls = 'fib-item default';
                if (v !== null) cls = 'fib-item computed';
                if (i === currentIdx && !done) cls = 'fib-item current';
                return `<div class="${cls}"><span class="idx">F(${i})</span><span class="val">${v !== null ? v : '?'}</span></div>`;
            }).join('');

            document.getElementById('memo-panel').style.display = (method === 'memo') ? 'block' : 'none';
            document.getElementById('memo').innerHTML = Object.keys(memo).length > 0
                ? Object.entries(memo).map(([k, v]) => `<div class="memo-item">[${k}]=${v}</div>`).join('')
                : '<span style="color:#999;">Empty</span>';

            document.getElementById('result').textContent = fibValues[N] !== null ? fibValues[N] : '?';
            document.getElementById('calls').textContent = `Calls: ${calls}`;
            document.getElementById('complexity').textContent = complexities[method];
        }

        function step() {
            if (done) return;

            calls++;

            if (method === 'recursive' || method === 'memo') {
                // Simulate bottom-up for visualization (actual recursive would be complex to visualize)
                if (currentIdx <= N) {
                    if (currentIdx <= 1) {
                        fibValues[currentIdx] = currentIdx;
                        if (method === 'memo') memo[currentIdx] = currentIdx;
                        document.getElementById('status').innerHTML = `Base case: F(${currentIdx}) = ${currentIdx}`;
                    } else {
                        fibValues[currentIdx] = fibValues[currentIdx - 1] + fibValues[currentIdx - 2];
                        if (method === 'memo') memo[currentIdx] = fibValues[currentIdx];
                        document.getElementById('status').innerHTML = 
                            `F(${currentIdx}) = F(${currentIdx-1}) + F(${currentIdx-2}) = ${fibValues[currentIdx-1]} + ${fibValues[currentIdx-2]} = ${fibValues[currentIdx]}`;
                    }
                    currentIdx++;
                }

                if (currentIdx > N) {
                    done = true;
                    document.getElementById('status').innerHTML = `‚úÖ F(${N}) = ${fibValues[N]}`;
                    document.getElementById('stepBtn').disabled = true;
                    document.getElementById('autoBtn').disabled = true;
                    stopAuto();
                }
            } else if (method === 'tabulation') {
                if (currentIdx <= N) {
                    if (currentIdx <= 1) {
                        fibValues[currentIdx] = currentIdx;
                        document.getElementById('status').innerHTML = `Initialize: dp[${currentIdx}] = ${currentIdx}`;
                    } else {
                        fibValues[currentIdx] = fibValues[currentIdx - 1] + fibValues[currentIdx - 2];
                        document.getElementById('status').innerHTML = 
                            `dp[${currentIdx}] = dp[${currentIdx-1}] + dp[${currentIdx-2}] = ${fibValues[currentIdx]}`;
                    }
                    currentIdx++;
                }

                if (currentIdx > N) {
                    done = true;
                    document.getElementById('status').innerHTML = `‚úÖ dp[${N}] = ${fibValues[N]}`;
                    document.getElementById('stepBtn').disabled = true;
                    document.getElementById('autoBtn').disabled = true;
                    stopAuto();
                }
            } else {
                // Space optimized
                if (currentIdx <= N) {
                    if (currentIdx <= 1) {
                        fibValues[currentIdx] = currentIdx;
                        document.getElementById('status').innerHTML = `Initialize: prev=${prevTwo[0]}, curr=${prevTwo[1]}`;
                    } else {
                        const next = prevTwo[0] + prevTwo[1];
                        fibValues[currentIdx] = next;
                        document.getElementById('status').innerHTML = 
                            `next = ${prevTwo[0]} + ${prevTwo[1]} = ${next}. Shift: prev=${prevTwo[1]}, curr=${next}`;
                        prevTwo = [prevTwo[1], next];
                    }
                    currentIdx++;
                }

                if (currentIdx > N) {
                    done = true;
                    document.getElementById('status').innerHTML = `‚úÖ F(${N}) = ${fibValues[N]} (only 2 variables used!)`;
                    document.getElementById('stepBtn').disabled = true;
                    document.getElementById('autoBtn').disabled = true;
                    stopAuto();
                }
            }

            render();
        }

        function reset() {
            stopAuto();
            fibValues = new Array(N + 1).fill(null);
            memo = {};
            currentIdx = 0;
            calls = 0;
            prevTwo = [0, 1];
            done = false;
            document.getElementById('stepBtn').disabled = false;
            document.getElementById('autoBtn').disabled = false;
            document.getElementById('status').innerHTML = 'Click Step to compute F(7)';
            render();
        }

        function stopAuto() {
            if (autoInterval) { clearInterval(autoInterval); autoInterval = null; }
            document.getElementById('autoBtn').textContent = 'Auto Run';
        }

        document.querySelectorAll('.tab').forEach(tab => {
            tab.onclick = () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                method = tab.dataset.method;
                reset();
            };
        });

        document.getElementById('stepBtn').onclick = () => { stopAuto(); step(); };
        document.getElementById('autoBtn').onclick = () => {
            if (autoInterval) { stopAuto(); }
            else { autoInterval = setInterval(step, 600); document.getElementById('autoBtn').textContent = '‚è∏ Pause'; }
        };
        document.getElementById('resetBtn').onclick = reset;

        render();
    </script>
</body>
</html>
