<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sort List - Built-in Sort</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { text-align: center; color: white; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .subtitle { text-align: center; color: rgba(255,255,255,0.9); margin-bottom: 20px; font-size: 14px; }
        .controls { display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; }
        button { background: white; color: #667eea; border: none; padding: 10px 25px; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        button:hover { transform: scale(1.05); box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
        button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .panel { background: white; border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .panel-title { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #667eea; }
        .list-container { display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap; min-height: 100px; }
        .node { display: flex; flex-direction: column; align-items: center; }
        .node-box { width: 50px; height: 40px; background: #f5f7fa; border: 2px solid #667eea; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 18px; transition: all 0.3s; }
        .node-box.active { background: #667eea; color: white; }
        .node-box.converted { background: #4caf50; color: white; border-color: #2e7d32; }
        .node-box.sorted { background: #e3f2fd; border-color: #2196f3; }
        .arrow { color: #667eea; font-size: 20px; }
        .python-list { display: flex; align-items: center; justify-content: center; gap: 5px; font-family: monospace; font-size: 18px; padding: 15px; background: #f5f7fa; border-radius: 10px; }
        .bracket { color: #667eea; font-weight: bold; font-size: 24px; }
        .list-item { padding: 5px 10px; background: white; border-radius: 5px; border: 2px solid #667eea; transition: all 0.3s; }
        .list-item.highlight { background: #667eea; color: white; }
        .list-item.sorted { background: #4caf50; color: white; border-color: #2e7d32; }
        .status-box { background: #f5f7fa; border-radius: 10px; padding: 15px; font-family: monospace; }
        .step-indicator { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; }
        .step-item { padding: 10px 20px; background: #f5f7fa; border-radius: 20px; transition: all 0.3s; }
        .step-item.active { background: #667eea; color: white; }
        .step-item.done { background: #4caf50; color: white; }
        .code-box { background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 10px; font-family: 'Consolas', monospace; font-size: 13px; }
        .code-box .highlight { background: #264f78; display: block; margin: 0 -15px; padding: 0 15px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîó Sort List - Built-in Sort</h1>
        <p class="subtitle">O(n log n) using Python list and built-in sort</p>

        <div class="controls">
            <button id="stepBtn">Step</button>
            <button id="autoBtn">Auto Run</button>
            <button id="resetBtn">Reset</button>
        </div>

        <div class="step-indicator">
            <div class="step-item" id="step1">1. Convert to List</div>
            <div class="step-item" id="step2">2. Sort</div>
            <div class="step-item" id="step3">3. Convert Back</div>
        </div>

        <div class="panel">
            <div class="panel-title">üîó Linked List</div>
            <div class="list-container" id="linked-list"></div>
        </div>

        <div class="panel">
            <div class="panel-title">üìù Python List</div>
            <div class="python-list" id="python-list">
                <span class="bracket">[</span>
                <span id="list-content">-</span>
                <span class="bracket">]</span>
            </div>
        </div>

        <div class="panel">
            <div class="panel-title">üìä Status</div>
            <div class="status-box" id="status">Click "Step" or "Auto Run" to start</div>
        </div>

        <div class="panel">
            <div class="panel-title">üíª Algorithm</div>
            <div class="code-box" id="code">
<span id="line1">def sortList(head):</span>
<span id="line2">    # Convert Linked List to Python List</span>
<span id="line3">    p = head</span>
<span id="line4">    lst = []</span>
<span id="line5">    while p:</span>
<span id="line6">        lst.append(p.val)</span>
<span id="line7">        p = p.next</span>
<span id="line8">    </span>
<span id="line9">    # Sort using built-in</span>
<span id="line10">    lst.sort()</span>
<span id="line11">    </span>
<span id="line12">    # Convert back to Linked List</span>
<span id="line13">    p = head</span>
<span id="line14">    for i in range(len(lst)):</span>
<span id="line15">        p.val = lst[i]</span>
<span id="line16">        p = p.next</span>
<span id="line17">    return head</span>
            </div>
        </div>
    </div>

    <script>
        const initialList = [4, 2, 1, 3, 5, 6];
        let linkedList = [...initialList];
        let pythonList = [];
        let step = 0;
        let phase = 0; // 0: convert, 1: sort, 2: convert back
        let convertIndex = 0;
        let autoInterval = null;

        function renderLinkedList() {
            const container = document.getElementById('linked-list');
            container.innerHTML = '';
            
            linkedList.forEach((val, i) => {
                const node = document.createElement('div');
                node.className = 'node';
                node.innerHTML = `<div class="node-box" id="ll-node-${i}">${val}</div>`;
                container.appendChild(node);
                
                if (i < linkedList.length - 1) {
                    const arrow = document.createElement('div');
                    arrow.className = 'arrow';
                    arrow.textContent = '‚Üí';
                    container.appendChild(arrow);
                }
            });
        }

        function renderPythonList() {
            const content = document.getElementById('list-content');
            if (pythonList.length === 0) {
                content.innerHTML = '-';
            } else {
                content.innerHTML = pythonList.map((v, i) => 
                    `<span class="list-item" id="py-item-${i}">${v}</span>`
                ).join(', ');
            }
        }

        function updateStepIndicator() {
            for (let i = 1; i <= 3; i++) {
                const el = document.getElementById(`step${i}`);
                el.classList.remove('active', 'done');
                if (i < phase + 1) el.classList.add('done');
                else if (i === phase + 1) el.classList.add('active');
            }
        }

        function highlightCode(lineNum) {
            document.querySelectorAll('.code-box span').forEach(span => {
                span.classList.remove('highlight');
            });
            if (lineNum) {
                const line = document.getElementById(`line${lineNum}`);
                if (line) line.classList.add('highlight');
            }
        }

        function executeStep() {
            if (phase === 0) {
                // Convert to Python list
                if (convertIndex < linkedList.length) {
                    pythonList.push(linkedList[convertIndex]);
                    
                    highlightCode(6);
                    renderPythonList();
                    
                    const node = document.getElementById(`ll-node-${convertIndex}`);
                    if (node) node.classList.add('active');
                    
                    document.getElementById('status').innerHTML = 
                        `Append node[${convertIndex}].val = ${linkedList[convertIndex]} to Python list`;
                    
                    convertIndex++;
                } else {
                    phase = 1;
                    updateStepIndicator();
                    highlightCode(10);
                    
                    // Sort the python list
                    pythonList.sort((a, b) => a - b);
                    renderPythonList();
                    
                    // Highlight all as sorted
                    pythonList.forEach((_, i) => {
                        const item = document.getElementById(`py-item-${i}`);
                        if (item) item.classList.add('sorted');
                    });
                    
                    document.getElementById('status').innerHTML = 
                        `Sort Python list: [${pythonList.join(', ')}]`;
                    
                    convertIndex = 0;
                }
            } else if (phase === 1) {
                phase = 2;
                updateStepIndicator();
                convertIndex = 0;
                executeStep();
                return;
            } else if (phase === 2) {
                // Convert back to linked list
                if (convertIndex < pythonList.length) {
                    linkedList[convertIndex] = pythonList[convertIndex];
                    
                    highlightCode(15);
                    renderLinkedList();
                    
                    const node = document.getElementById(`ll-node-${convertIndex}`);
                    if (node) {
                        node.classList.add('converted');
                    }
                    
                    document.getElementById('status').innerHTML = 
                        `Set node[${convertIndex}].val = ${pythonList[convertIndex]}`;
                    
                    convertIndex++;
                } else {
                    highlightCode(17);
                    document.getElementById('status').innerHTML = 
                        '‚úÖ Sort complete! Linked list is now sorted.';
                    document.getElementById('stepBtn').disabled = true;
                    document.getElementById('autoBtn').disabled = true;
                    stopAuto();
                    
                    // Mark all nodes as converted
                    linkedList.forEach((_, i) => {
                        const node = document.getElementById(`ll-node-${i}`);
                        if (node) node.classList.add('converted');
                    });
                }
            }
        }

        function reset() {
            stopAuto();
            linkedList = [...initialList];
            pythonList = [];
            step = 0;
            phase = 0;
            convertIndex = 0;
            
            document.getElementById('stepBtn').disabled = false;
            document.getElementById('autoBtn').disabled = false;
            document.getElementById('status').innerHTML = 'Click "Step" or "Auto Run" to start';
            
            highlightCode(null);
            updateStepIndicator();
            renderLinkedList();
            renderPythonList();
        }

        function stopAuto() {
            if (autoInterval) {
                clearInterval(autoInterval);
                autoInterval = null;
                document.getElementById('autoBtn').textContent = 'Auto Run';
            }
        }

        document.getElementById('stepBtn').addEventListener('click', () => {
            stopAuto();
            executeStep();
        });

        document.getElementById('autoBtn').addEventListener('click', () => {
            if (autoInterval) {
                stopAuto();
            } else {
                autoInterval = setInterval(executeStep, 600);
                document.getElementById('autoBtn').textContent = '‚è∏ Pause';
            }
        });

        document.getElementById('resetBtn').addEventListener('click', reset);

        // Initialize
        updateStepIndicator();
        renderLinkedList();
        renderPythonList();
    </script>
</body>
</html>
